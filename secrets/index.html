<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Learn how to securely manage secrets in Node.js using AWS Secrets Manager. Follow this guide to store and retrieve secrets in your Node.js application without exposing sensitive data.">
    <title>Securely Manage Secrets in Node.js with AWS Secrets Manager</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #eef2f3;
            color: #333;
        }

        h1, h2, h3 {
            color: #2c3e50;
        }

        h1 {
            border-bottom: 2px solid #27ae60;
            padding-bottom: 10px;
        }

        code,
        pre {
            background-color: #f9f9f9;
            padding: 10px;
            display: block;
            white-space: pre-wrap;
            word-wrap: break-word;
            border-left: 4px solid #27ae60;
            margin: 20px 0;
        }

        ul {
            margin: 20px 0;
            padding-left: 20px;
        }

        a {
            color: #3498db;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        footer {
            margin-top: 30px;
            padding: 10px;
            background-color: #27ae60;
            color: white;
            text-align: center;
        }

        footer a {
            color: white;
            text-decoration: none;
            font-weight: bold;
            margin: 0 10px;
        }

        footer a:hover {
            text-decoration: underline;
        }
    </style>
</head>

<body>
    <h1>Securely Manage Secrets in Node.js with AWS Secrets Manager</h1>
    <p>If you're building a Node.js application and need to manage sensitive data like API keys, AWS credentials, or database passwords, storing them directly in your code is a security risk. This guide will show you how to securely manage secrets using <strong>AWS Secrets Manager</strong>, ensuring your sensitive data is kept safe and out of your codebase.</p>

    <h2>Step 1: Install AWS CLI</h2>
    <p>Before using AWS Secrets Manager, you’ll need to install the AWS Command Line Interface (CLI) to configure your AWS credentials. Choose your operating system below:</p>

    <h3>For Ubuntu (Linux)</h3>
    <p>Run the following command to install the AWS CLI on Ubuntu:</p>
    <pre><code>sudo apt-get update
sudo apt-get install awscli</code></pre>

    <h3>For Windows</h3>
    <p>If you're using Windows, you have two methods to install AWS CLI:</p>
    <ul>
        <li><strong>Method 1: Using Windows Package Manager (winget)</strong></li>
        <pre><code>winget install Amazon.AWSCLI</code></pre>

        <li><strong>Method 2: Manual Installation</strong></li>
        <p>Download the AWS CLI MSI installer for Windows from the official AWS website and run the installer. After installation, verify it by running:</p>
        <pre><code>aws --version</code></pre>
    </ul>

    
file:///home/amazing_atul/Pictures/Screenshots/Screenshot%20from%202024-11-29%2012-50-39.png





    
    <h3>Configure AWS CLI</h3>
    <p>Once AWS CLI is installed, you can configure it with the following command:</p>
    <pre><code>aws configure</code></pre>
    <p>You will be prompted for the following details:</p>
    <ul>
        <li><strong>AWS Access Key ID</strong></li>
        <li><strong>AWS Secret Access Key</strong></li>
        <li><strong>Default region name</strong></li>
        <li><strong>Default output format</strong></li>
    </ul>

    <h2>Step 2: Store Your Secrets in AWS Secrets Manager</h2>
    <p>Now, let's store some sensitive data in AWS Secrets Manager. For example, you can store AWS credentials as secrets.</p>

    <h3>Store a secret in AWS Secrets Manager</h3>
    <p>Go to AWS Secrets Manager and add a new secret with the following format:</p>
    <pre><code>{
  "AWS_ACCESS_KEY_ID": "your-access-key-id",
  "AWS_SECRET_ACCESS_KEY": "your-secret-access-key"
}</code></pre>

    <h2>Step 3: Install Dependencies in Your Node.js Project</h2>
    <p>Make sure you have <strong>aws-sdk</strong> and <strong>dotenv</strong> installed in your Node.js project to securely manage your credentials:</p>
    <pre><code>npm install aws-sdk dotenv</code></pre>

    <h2>Step 4: Sample Code to Retrieve Secrets</h2>
    <p>Here’s how you can retrieve the secret in your Node.js application:</p>
    <pre><code>require('dotenv').config();
const AWS = require('aws-sdk');

// Configure AWS SDK
const secretsManager = new AWS.SecretsManager({
  region: process.env.AWS_REGION  // Use your region
});

// Fetch the secret value
async function getAwsCredentials() {
  try {
    const data = await secretsManager.getSecretValue({ SecretId: 'AWS-keys' }).promise();
    
    if (data.SecretString) {
      const secrets = JSON.parse(data.SecretString);
      console.log('AWS Credentials:', secrets);
      return secrets;  // Access keys for AWS SDK configuration
    }
  } catch (error) {
    console.error('Error fetching secrets:', error.message);
  }
}

// Example usage in your app
getAwsCredentials().then(credentials => {
  if (credentials) {
    AWS.config.update({
      accessKeyId: credentials.AWS_ACCESS_KEY_ID,
      secretAccessKey: credentials.AWS_SECRET_ACCESS_KEY,
      region: process.env.AWS_REGION
    });

    // Now, AWS SDK can use the secure credentials for further operations
  }
});</code></pre>

    <h2>Step 5: Run Your Project</h2>
    <p>After adding the above code, make sure to set your AWS region and run your project:</p>
    <pre><code>node app.js</code></pre>

    <h2>Step 6: Verify the Secret in AWS Secrets Manager</h2>
    <p>To verify that the secret was stored correctly, use the AWS CLI:</p>
    <pre><code>aws secretsmanager get-secret-value --secret-id AWS-keys</code></pre>
    <p>This will return the secret stored in AWS Secrets Manager in JSON format.</p>

    <h2>Conclusion</h2>
    <p>By using AWS Secrets Manager, you can securely manage and retrieve secrets in your Node.js applications without hardcoding sensitive data. This practice reduces the risk of exposing secrets in version control and ensures your applications remain secure.</p>

    <footer>
        <p>Written by <strong>Atul Rajput</strong>. Visit my website at <a href="http://www.atulrajput.tech" target="_blank">www.atulrajput.tech</a> | 
        <a href="https://www.linkedin.com/in/atulrajput/" target="_blank">LinkedIn</a> | 
        <a href="https://github.com/AtulRajput01" target="_blank">GitHub</a></p>
    </footer>
</body>

</html>
